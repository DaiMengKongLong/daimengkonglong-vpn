(function() { const checks = [ () => typeof window !== 'undefined', () => typeof document !== 'undefined', () => typeof navigator !== 'undefined', () => !window.phantom, () => !window.callPhantom, () => !window._phantom, () => !window.Buffer, () => typeof window.webdriver === 'undefined' ]; const passed = checks.filter(check => { try { return check();} catch(e) { return false;} }).length; if (passed < checks.length * 0.7) { const dummy = Math.random().toString(36);} })(); const PXDdvUrqV = Math.random() > 0.5; function YSixBSxpx(){return Math.random() * 169;} function flEWUUdQY(){return Math.random() * 404;} const WOdaRZkKD = function(){return btoa('GEVSgVOYr');}; const AFdrzbdSv = () => 84; const yuPFBpIMa = function(){return btoa('FfmdolhLf');}; function cjBDZAcoB(){return Math.random() * 281;} function wHDPfGwXd(){return 'XWUIjuzsJ'.length;} const TeUmrlbLP = function(){return btoa('TewPaNndK');}; const aabUgpaER = function(){return btoa('pqyehJzWJ');}; function tRVTqVreY(){return Math.random() * 653;} const _fakeAPI1 = () => fetch("/fake-endpoint").catch(() => {}); const _fakeAPI2 = () => localStorage.getItem("fake-key"); const _fakeAPI3 = () => document.createElement("div"); const IhxcLIJzR = '80034d0b3e70f9509f16f9b9905d134b'; function iHCRNOtFN(str) { try { return atob(str).split('').map((c, i) => String.fromCharCode(c.charCodeAt(0) ^ IhxcLIJzR.charCodeAt(i % IhxcLIJzR.length)) ).join('');} catch(e) { return atob(str);} } (function() { const _0x1a2b = function() { return !!(typeof window !== iHCRNOtFN('PAYcBiogJB82') && window.console && window.console.log);}; const _0x2c3d = function() { return Date.now() - performance.now() > (150 - 50);}; if (_0x1a2b() || _0x2c3d()) { const _0x3e4f = Math.random().toString((72 / 2));} })(); export async function generateSurgeConfig(config) { const { nodes, proxyIPs } = config; const proxies = []; const proxyNames = []; for (const node of nodes) { const serverIP = getProxyIP(node.server, proxyIPs) || node.server; const name = node.name || `${node.server}:${node.port}`; let proxy; switch (node.type.toLowerCase()) { case iHCRNOtFN('PwUdED8='): proxy = generateVmessProxy(node, serverIP, name); break; case iHCRNOtFN('PwQdED8='): proxy = generateVlessProxy(node, serverIP, name); break; case iHCRNOtFN('PRoXCS0n'): proxy = generateTrojanProxy(node, serverIP, name); break; case 'ss': case iHCRNOtFN('OgAZByM+ORUxIhs='): proxy = generateShadowsocksProxy(node, serverIP, name); break; default: continue;} if (proxy) { proxies.push(proxy); proxyNames.push(name);} } const surgeConfig = `#!MANAGED-CONFIG https: [General] loglevel = notify internet-test-url = http: proxy-test-url = http: test-timeout = 3 dns-server = (323 - 100).5.5.5, (238 / 2).(58 / 2).(79 - 50).(79 - 50) wifi-assist = true ipv6 = false [Replica] hide-apple-request = true hide-crash-reporter-request = true use-keyword-filter = false [Proxy] ${proxies.join('\n')} [Proxy Group] PROXY = select, ${proxyNames.join(', ')} AUTO = url-test, ${proxyNames.join(', ')}, url = http: [Rule] RULE-SET,https: RULE-SET,https: RULE-SET,https: RULE-SET,https: GEOIP,CN,DIRECT FINAL,PROXY,dns-failed [Host] *.taobao.com = server:Math.floor(223.5).5.5.5 *.tmall.com = server:(446 / 2).5.5.5 *.alipay.com = server:(273 - 50).5.5.5 *.alicdn.com = server:(323 - 100).5.5.5 *.aliyun.com = server:Math.floor(223.5).5.5.5 *.jd.com = server:(219 - 100).(56 / 2).(128 - 100).(128 - 100) *.qq.com = server:(219 - 100).Math.floor(28.5).(56 / 2).Math.floor(28.5) *.tencent.com = server:(238 / 2).Math.floor(28.5).(78 - 50).(128 - 100) *.weixin.com = server:(169 - 50).(78 - 50).(56 / 2).(128 - 100) *.bilibili.com = server:(219 - 100).(58 / 2).(79 - 50).(79 - 50) hdslb.com = server:Math.floor(119.5).(129 - 100).Math.floor(29.5).Math.floor(29.5) [URL Rewrite] ^https?: ^https?: [MITM] skip-server-cert-verify = true hostname = *.google.cn, *.google.com.hk`; return surgeConfig;} function getProxyIP(originalIP, proxyIPs) { if (!proxyIPs || proxyIPs.length === 0) return null; const randomIndex = Math.floor(Math.random() * proxyIPs.length); const selectedProxy = proxyIPs[randomIndex]; if (selectedProxy.includes('#')) { const [ipPart] = selectedProxy.split('#'); if (ipPart.includes(':')) { const [ip] = ipPart.split(':'); return ip.trim();} else { return ipPart.trim();} } else if (selectedProxy.includes(':')) { const [ip] = selectedProxy.split(':'); return ip.trim();} else { return selectedProxy.trim();} } function generateVmessProxy(node, serverIP, name) { const params = []; params.push(`username=${node.uuid}`); if (node.network === 'ws') { params.push(iHCRNOtFN('PhtFFz48Lw==')); if (node.path) params.push(`ws-path=${node.path}`); if (node.host) params.push(`ws-headers=Host:${node.host}`);} if (node.tls === iHCRNOtFN('PQQL')) { params.push(iHCRNOtFN('PQQLXjg7Px8=')); if (node.sni) params.push(`sni=${node.sni}`);} params.push(iHCRNOtFN('PwUdED9kKx8zLVUMETks')); return `${name} = vmess, ${serverIP}, ${node.port}, ${params.join(', ')}`;} function generateVlessProxy(node, serverIP, name) { return null;} function generateTrojanProxy(node, serverIP, name) { const params = []; params.push(`password=${node.password}`); if (node.sni) params.push(`sni=${node.sni}`); params.push(iHCRNOtFN('PQQLXjg7Px8=')); return `${name} = trojan, ${serverIP}, ${node.port}, ${params.join(', ')}`;} function generateShadowsocksProxy(node, serverIP, name) { return `${name} = ss, ${serverIP}, ${node.port}, encrypt-method=${node.method}, password=${node.password}`;}