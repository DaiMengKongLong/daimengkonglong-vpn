# ğŸš€ éƒ¨ç½²æŒ‡å— - è¯­æ³•é”™è¯¯å·²ä¿®å¤

## âœ… é—®é¢˜å·²è§£å†³

ä¹‹å‰é‡åˆ°çš„è¯­æ³•é”™è¯¯å·²ç»å®Œå…¨ä¿®å¤ï¼ç°åœ¨å¯ä»¥æ­£å¸¸éƒ¨ç½²åˆ° Cloudflare Pages å’Œ Workersã€‚

### ğŸ”§ ä¿®å¤çš„é—®é¢˜
- âœ… ä¿®å¤äº†æ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„è½¬ä¹‰åå¼•å·é”™è¯¯
- âœ… ä¿®å¤äº†JavaScriptä»£ç ä¸­çš„ä¸‰é‡è½¬ä¹‰é—®é¢˜
- âœ… ä¼˜åŒ–äº† Pages éƒ¨ç½²é…ç½®
- âœ… æ·»åŠ äº†éƒ¨ç½²å‰æ£€æŸ¥è„šæœ¬

## ğŸš€ ç«‹å³éƒ¨ç½²

### æ–¹æ³•ä¸€ï¼šè‡ªåŠ¨éƒ¨ç½²è„šæœ¬ï¼ˆæ¨èï¼‰

#### Workers éƒ¨ç½²
```bash
# Linux/Mac
./deploy.sh

# Windows
deploy.bat
```

#### Pages éƒ¨ç½²
```bash
# Linux/Mac
./deploy-pages.sh

# Windows
deploy-pages.bat
```

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²

#### 1. éƒ¨ç½²å‰æ£€æŸ¥
```bash
node pre-deploy-check.js
```

#### 2. Workers éƒ¨ç½²
```bash
npm install
npx wrangler login
npx wrangler kv:namespace create "CONFIG_KV"
# æ›´æ–° wrangler.toml ä¸­çš„ KV ID
npm run deploy
```

#### 3. Pages éƒ¨ç½²

**Git ä»“åº“éƒ¨ç½²ï¼ˆæ¨èï¼‰ï¼š**
1. å°†ä»£ç æ¨é€åˆ° Git ä»“åº“
2. åœ¨ Cloudflare Dashboard åˆ›å»º Pages é¡¹ç›®
3. è¿æ¥ Git ä»“åº“
4. é…ç½®æ„å»ºè®¾ç½®ï¼š
   - Framework preset: None
   - Build command: (ç•™ç©º)
   - Build output directory: /
5. æ·»åŠ ç¯å¢ƒå˜é‡ï¼š`CONFIG_KV = your-kv-namespace-id`

**ç›´æ¥éƒ¨ç½²ï¼š**
```bash
npm install
npx wrangler login
npx wrangler kv:namespace create "CONFIG_KV"
npx wrangler pages project create your-project-name
npx wrangler pages deploy . --project-name=your-project-name
```

## ğŸ”§ é…ç½® KV å‘½åç©ºé—´

### åˆ›å»º KV å‘½åç©ºé—´
```bash
# ç”Ÿäº§ç¯å¢ƒ
npx wrangler kv:namespace create "CONFIG_KV"

# é¢„è§ˆç¯å¢ƒ
npx wrangler kv:namespace create "CONFIG_KV" --preview
```

### æ›´æ–°é…ç½®æ–‡ä»¶

**Workers (wrangler.toml)ï¼š**
```toml
[[kv_namespaces]]
binding = "CONFIG_KV"
id = "your-actual-kv-id"
preview_id = "your-preview-kv-id"
```

**Pagesï¼š**
åœ¨ Cloudflare Dashboard > Pages > é¡¹ç›®è®¾ç½® > ç¯å¢ƒå˜é‡ä¸­æ·»åŠ ï¼š
- å˜é‡åï¼š`CONFIG_KV`
- å˜é‡å€¼ï¼š`your-actual-kv-id`

## ğŸ¯ éƒ¨ç½²åéªŒè¯

### 1. è®¿é—®æœåŠ¡
- **Workers**: `https://your-worker.your-subdomain.workers.dev`
- **Pages**: `https://your-project.pages.dev`

### 2. æ£€æŸ¥åŠŸèƒ½
- âœ… é¦–é¡µæ­£å¸¸æ˜¾ç¤º
- âœ… ç®¡ç†é¢æ¿å¯è®¿é—® (`/admin`)
- âœ… è®¢é˜…é“¾æ¥ç”Ÿæˆæ­£å¸¸
- âœ… ç¯å¢ƒæ£€æµ‹æ­£å¸¸å·¥ä½œ

### 3. æµ‹è¯•è®¢é˜…æ ¼å¼
- Base64: `/sub/base64?token=default`
- Clash: `/sub/clash?token=default`
- SingBox: `/sub/singbox?token=default`
- Loon: `/sub/loon?token=default`
- Surge: `/sub/surge?token=default`

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. KV å‘½åç©ºé—´é”™è¯¯**
```
è§£å†³æ–¹æ¡ˆï¼šç¡®ä¿ KV å‘½åç©ºé—´ ID é…ç½®æ­£ç¡®
æ£€æŸ¥å‘½ä»¤ï¼šnpx wrangler kv:namespace list
```

**2. ç¯å¢ƒå˜é‡æœªè®¾ç½®**
```
Workersï¼šæ£€æŸ¥ wrangler.toml é…ç½®
Pagesï¼šæ£€æŸ¥é¡¹ç›®è®¾ç½®ä¸­çš„ç¯å¢ƒå˜é‡
```

**3. è¯­æ³•é”™è¯¯**
```
è¿è¡Œä¿®å¤è„šæœ¬ï¼šnode fix-syntax.js
é‡æ–°æ£€æŸ¥ï¼šnode pre-deploy-check.js
```

**4. éƒ¨ç½²æƒé™é—®é¢˜**
```
é‡æ–°ç™»å½•ï¼šnpx wrangler login
æ£€æŸ¥æƒé™ï¼šnpx wrangler whoami
```

### è°ƒè¯•å‘½ä»¤

```bash
# æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—
npx wrangler tail

# æœ¬åœ°å¼€å‘æµ‹è¯•
npm run dev

# Pages æœ¬åœ°å¼€å‘
npm run pages:dev

# æ£€æŸ¥é…ç½®
npx wrangler deploy --dry-run
```

## ğŸ“Š éƒ¨ç½²æ–¹å¼å¯¹æ¯”

| ç‰¹æ€§ | Workers | Pages |
|------|---------|-------|
| **éƒ¨ç½²é€Ÿåº¦** | å¿« | ä¸­ç­‰ |
| **è‡ªåŠ¨éƒ¨ç½²** | âŒ | âœ… |
| **ç‰ˆæœ¬æ§åˆ¶** | åŸºç¡€ | å®Œæ•´ |
| **å›æ»šåŠŸèƒ½** | æ‰‹åŠ¨ | ä¸€é”® |
| **é€‚åˆåœºæ™¯** | APIæœåŠ¡ | å…¨æ ˆåº”ç”¨ |

## ğŸ‰ éƒ¨ç½²æˆåŠŸ

éƒ¨ç½²æˆåŠŸåï¼Œæ‚¨å°†æ‹¥æœ‰ï¼š

- ğŸ”„ **å¤šæ ¼å¼è®¢é˜…è½¬æ¢**ï¼šæ”¯æŒ5ç§ä¸»æµæ ¼å¼
- ğŸ¨ **Glassmorphismç•Œé¢**ï¼šç°ä»£åŒ–ç£¨ç ‚ç»ç’ƒè®¾è®¡
- ğŸ› ï¸ **å®Œæ•´ç®¡ç†ç³»ç»Ÿ**ï¼šèŠ‚ç‚¹ã€é…ç½®ã€åä»£IPç®¡ç†
- ğŸš€ **åŒå¹³å°æ”¯æŒ**ï¼šWorkerså’ŒPagesä»»é€‰
- ğŸ”§ **ç¯å¢ƒè‡ªé€‚åº”**ï¼šè‡ªåŠ¨æ£€æµ‹è¿è¡Œç¯å¢ƒ

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹ `README.md` è¯¦ç»†æ–‡æ¡£
2. è¿è¡Œ `node pre-deploy-check.js` æ£€æŸ¥é…ç½®
3. è¿è¡Œ `node fix-syntax.js` ä¿®å¤è¯­æ³•
4. æ£€æŸ¥ Cloudflare Dashboard ä¸­çš„é”™è¯¯æ—¥å¿—

**æ­å–œï¼æ‚¨çš„è®¢é˜…è½¬æ¢æœåŠ¡ç°åœ¨å¯ä»¥æ­£å¸¸éƒ¨ç½²äº†ï¼** ğŸŠ
